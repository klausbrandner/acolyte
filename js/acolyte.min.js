/**

	5-designs - company
	Acolyte
	created with love in Austria

	Version: 0.1.0
	Last changed: 08-11-2015
	Website: http://www.acolyte.5-designs.com
	Github: https://github.com/5-designs/acolyte

*/

function CreateRequest(a){for(var b=10,c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOP1234567890",d="",e=0;b>e;e++){var f=Math.floor(Math.random()*c.length);d+=c.charAt(f)}document.cookie="aco-key="+d+";path=/",a(d)}var acolyte={pathToAcolyte:"",pathToServer:"server/",tmpImage:"",tmpText:"...",newText:"Hi, I'm a new text.",updateRate:1e3};!function(){angular.module("Acolyte",["ngSanitize"]).directive("acoRoot",function(){return{restrict:"E",controller:"AcoRootController",controllerAs:"rootCtrl",templateUrl:acolyte.pathToAcolyte+"templates/aco-root.html"}}).factory("AcoPageContentService",["$rootScope",function(a){var b={};return b.texts={},b.images={},b.edit=!1,b.setEdit=function(){b.edit=!b.edit,b.broadcastEditMode()},b.getEditMode=function(){return b.edit},b.fetchContent=function(){var a={textContent:[{category:"home",element:"header",text:"Say Hello To Acolyte!",lan:"en"},{category:"home",element:"subtitle",text:"The Angularjs based CMS framework for web-developers",lan:"en"},{category:"home",element:"text1",text:"Hello, this is just an example text. You should be able to edit this text by clicking and holding the mouse pointer.",lan:"en"},{category:"home",element:"text2",text:"This is a link.",lan:"en"}],fileContent:[{category:"home",element:"banner",src:"src/images/image2.jpg"},{category:"home",element:"image1",src:"src/images/eys2.jpg"},{category:"home",element:"image2",src:"src/images/image3.jpg"}]};b.texts=a.textContent,b.images=a.fileContent,console.log(b.texts),console.log(b.images),b.broadcastPageContent()},b.getText=function(a,c){for(var d=!1,e=0;e<b.texts.length;e++){var f=b.texts[e];f.category==a&&f.element==c&&(d=f.text)}return d},b.getImage=function(a,c){for(var d=!1,e=0;e<b.images.length;e++){var f=b.images[e];f.category==a&&f.element==c&&(d=f.src)}return d},b.broadcastPageContent=function(){a.$broadcast("AcoPageContentChanged")},b.broadcastEditMode=function(){a.$broadcast("AcoEditModeChanged")},b}]).controller("AcoRootController",["$scope","$http","$timeout","AcoPageContentService",function(a,b,c,d){function e(){c(function(){d.fetchContent()})}e()}])}(),$(document).ready(function(){$("#clickEvent").click(function(){alert("this is a jQuery click event")})}),function(){angular.module("Acolyte").controller("AcoAdminController",["$scope","AcoPageContentService",function(a,b){function c(){$("aco-admin").draggable({handle:"#aco-admin-drag",containment:"document"})}var d=this;d.edit=!1,c(),d.setEditMode=function(){b.setEdit()},a.$on("AcoEditModeChanged",function(){d.edit=b.getEditMode()})}])}(),function(){angular.module("Acolyte").directive("acoAdmin",function(){return{restrict:"E",controller:"AcoAdminController",controllerAs:"acoAdminCtrl",templateUrl:acolyte.pathToAcolyte+"templates/aco-admin.html"}})}(),function(){angular.module("Acolyte").controller("AcoImageController",["$scope","$timeout","AcoPageContentService",function(a,b,c){var d=this;d.editable=!1,d.src=acolyte.tmpImage,d.edit=function(a){d.editable&&(a.preventDefault(),a.stopPropagation())},a.$on("AcoPageContentChanged",function(){var b=c.getImage(a.category,a.element);b||(b=acolyte.tmpImage),d.src=b}),a.$on("AcoEditModeChanged",function(){d.editable=c.getEditMode()})}]).controller("AcoBackgroundController",["$scope","AcoPageContentService",function(a,b){var c=this;c.edit=function(a){alert("update")}}])}(),function(){angular.module("Acolyte").directive("acoImg",function(){return{restrict:"AC",controller:"AcoImageController",controllerAs:"acoImgCtrl",replace:!0,scope:{category:"@",element:"@"},templateUrl:acolyte.pathToAcolyte+"templates/aco-image.html"}}).directive("acoBackground",["$compile","AcoPageContentService",function(a,b){return{restrict:"EC",controller:"AcoBackgroundController",controllerAs:"acoImgCtrl",scope:{category:"@",element:"@"},link:function(c,d,e){c.$on("AcoPageContentChanged",function(){var f=e.category,g=e.element,h=b.getImage(f,g),i=d.css("background-size"),j=d.css("background-position"),k=d.css("background-attachment"),l=d.css("background-repeat"),m="background:url("+h+");";m+="background-size:"+i+";",m+="background-position:"+j+";",m+="background-attachment:"+k+";",m+="background-repeat:"+l+";",e.$set("style",m),d.find("aco-update-img-btn").remove(),d.append(a('<aco-update-img-btn ng-click="acoImgCtrl.edit()">edit</div>')(c))})}}}])}(),function(){angular.module("Acolyte").controller("AcoTextController",["$sce","$scope","$interval","AcoPageContentService",function(a,b,c,d){function e(){var a={category:b.category,element:b.element,text:f.text};console.log(a)}var f=this;f.editable=!1,f.timer={},f.text=acolyte.tmpText,f.edit=function(a){f.editable&&(a.preventDefault(),a.stopPropagation(),c.cancel(f.timer),f.timer=c(function(){e()},acolyte.updateRate))},f.update=function(){c.cancel(f.timer),e()},b.$on("AcoPageContentChanged",function(){var a=d.getText(b.category,b.element);a||(a=acolyte.newText),f.text=a}),b.$on("AcoEditModeChanged",function(){f.editable=d.getEditMode()})}])}(),function(){angular.module("Acolyte").directive("acoText",function(){return{controller:"AcoTextController",controllerAs:"acoTxtCtrl",scope:{category:"@",element:"@"},templateUrl:acolyte.pathToAcolyte+"templates/aco-text.html"}}).directive("acoTextContenteditable",["$sce",function(a){return{restrict:"A",require:"?ngModel",link:function(b,c,d,e){function f(){var a=c.html();d.stripBr&&"<br>"==a&&(a=""),e.$setViewValue(a)}e&&(e.$render=function(){c.html(a.trustAsHtml(e.$viewValue)),c.html(e.$viewValue)},c.on("blur keyup change",function(){b.$evalAsync(f)}))}}}])}();